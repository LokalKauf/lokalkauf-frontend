<lk-container *ngIf="trader$ | async as trader">
  <div class="floating-backbutton margin-boost">
    <a
      class="navigate-back"
      (click)="navigateBackToOverview()"
      alt="zurück zur Übersicht"
    >
      <mat-icon class="inlinesymbol vertical-align-middle"
        >chevron_left</mat-icon
      >
      <span class="symboltext">Zurück zur Händlersuche</span>
    </a>
  </div>

  <div class="trader-title-wrapper">
    <lk-page-title [title]="trader.businessname"></lk-page-title>
  </div>

  <div
    class="trader-description text"
    *ngIf="trader.description && !showMoreText"
  >
    <span [innerHTML]="shortenText(trader.description) | nl2br: true"></span>...
    <div
      *ngIf="trader.description.length > 200"
      (click)="showMoreText = true"
      class="toggleDetails"
    >
      mehr lesen
    </div>
  </div>
  <div
    class="trader-description text"
    *ngIf="trader.description && showMoreText"
  >
    <span [innerHTML]="trader.description | nl2br: true"></span>
    <div
      *ngIf="trader.description.length > 200"
      (click)="showMoreText = false"
      class="toggleDetails"
    >
      weniger
    </div>
  </div>

  <div class="carousel">
    <mat-carousel
      *ngIf="traderImages$ | async as images"
      [hideArrows]="false"
      [hideIndicators]="false"
      [proportion]="90"
    >
      <mat-carousel-slide
        *ngFor="let image of images; let i = index"
        [image]="image"
        overlayColor="#00000000"
      >
        <div style="width: 100%; height: 100%;" (click)="openLightbox(i)"></div>
      </mat-carousel-slide>
    </mat-carousel>
  </div>

  <app-trader-contact [trader]="trader"></app-trader-contact>
  <ng-container *ngIf="(productAmount$ | async) > 0">
    <h3 class="products-headline">Unsere Produkte</h3>

    <div class="product-list" *ngIf="products$ | async as products">
      <lk-product-item
        *ngFor="let product of products"
        [product]="product"
        [enableInteraction]="false"
      >
      </lk-product-item>
    </div>
  </ng-container>

  <div class="floating-backbutton margin-boost">
    <a
      class="navigate-back"
      (click)="navigateBackToOverview()"
      alt="zurück zur Übersicht"
    >
      <mat-icon class="inlinesymbol vertical-align-middle"
        >chevron_left</mat-icon
      >
      <span class="symboltext">Zurück zur Händlersuche</span>
    </a>
  </div>
</lk-container>
